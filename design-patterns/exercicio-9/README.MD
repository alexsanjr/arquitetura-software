# ExercÃ­cio 9 - PadrÃ£o Composite

## DescriÃ§Ã£o do Problema

Uma empresa quer um programa em console que simule um sistema de arquivos simples. O objetivo Ã© permitir que o usuÃ¡rio organize arquivos e pastas, sendo que pastas podem conter outros arquivos ou pastas, de forma recursiva.

## Funcionalidades

- O usuÃ¡rio pode digitar `criar arquivo <nome>` para criar um arquivo na pasta atual
- O usuÃ¡rio pode digitar `criar pasta <nome>` para criar uma nova pasta dentro da pasta atual
- O usuÃ¡rio pode digitar `entrar <nome>` para entrar em uma pasta existente
- O usuÃ¡rio pode digitar `voltar` para voltar para a pasta anterior
- O usuÃ¡rio pode digitar `listar` para mostrar todo o conteÃºdo da pasta atual, incluindo arquivos e subpastas, de forma hierÃ¡rquica
- O programa roda em loop atÃ© o usuÃ¡rio digitar `sair`

## Exemplo de Uso

```
/root> criar pasta documentos
âœ… Pasta "documentos" criada com sucesso.

/root> criar pasta projetos
âœ… Pasta "projetos" criada com sucesso.

/root> criar arquivo readme.txt
âœ… Arquivo "readme.txt" criado com sucesso.

/root> listar

ğŸ“‚ ConteÃºdo de "root":

ğŸ“ root/
  ğŸ“ documentos/
  ğŸ“ projetos/
  ğŸ“„ readme.txt

/root> entrar documentos
âœ… Entrou na pasta: documentos

/root/documentos> criar arquivo relatorio.pdf
âœ… Arquivo "relatorio.pdf" criado com sucesso.

/root/documentos> criar pasta contratos
âœ… Pasta "contratos" criada com sucesso.

/root/documentos> listar

ğŸ“‚ ConteÃºdo de "documentos":

ğŸ“ documentos/
  ğŸ“„ relatorio.pdf
  ğŸ“ contratos/

/root/documentos> voltar
âœ… Voltou para: root

/root> listar

ğŸ“‚ ConteÃºdo de "root":

ğŸ“ root/
  ğŸ“ documentos/
    ğŸ“„ relatorio.pdf
    ğŸ“ contratos/
  ğŸ“ projetos/
  ğŸ“„ readme.txt
```

## PadrÃ£o de Design Utilizado

### Composite Pattern

O padrÃ£o **Composite** permite que vocÃª componha objetos em estruturas de Ã¡rvore para representar hierarquias parte-todo. Este padrÃ£o permite que clientes tratem objetos individuais e composiÃ§Ãµes de objetos de maneira uniforme.

#### Estrutura da SoluÃ§Ã£o

```
src/
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ FileSystemComponent.ts  # Componente abstrato base
â”‚   â”œâ”€â”€ File.ts                 # Folha (arquivo individual)
â”‚   â””â”€â”€ Folder.ts               # Composite (pasta que contÃ©m outros componentes)
â”œâ”€â”€ services/
â”‚   â””â”€â”€ FileSystemNavigator.ts  # Gerencia navegaÃ§Ã£o entre pastas
â””â”€â”€ index.ts                     # AplicaÃ§Ã£o principal
```

#### Componentes

1. **FileSystemComponent (Component)**: Classe abstrata que define a interface comum para arquivos e pastas
   - Define operaÃ§Ãµes bÃ¡sicas como `display()`, `getName()`, `isFolder()`
   - Define operaÃ§Ãµes de composiÃ§Ã£o que serÃ£o implementadas apenas por pastas

2. **File (Leaf)**: Representa um arquivo individual (folha da Ã¡rvore)
   - NÃ£o pode conter outros componentes
   - Implementa apenas operaÃ§Ãµes bÃ¡sicas

3. **Folder (Composite)**: Representa uma pasta que pode conter arquivos e outras pastas
   - Pode conter mÃºltiplos componentes filhos
   - Implementa operaÃ§Ãµes de composiÃ§Ã£o (`add`, `remove`, `getChild`, `getChildren`)
   - Delega operaÃ§Ãµes de exibiÃ§Ã£o para seus filhos (recursivamente)

4. **FileSystemNavigator (Client)**: Gerencia a navegaÃ§Ã£o entre pastas
   - MantÃ©m controle da pasta atual
   - MantÃ©m pilha de navegaÃ§Ã£o para o comando `voltar`
   - Fornece mÃ©todos para navegar e listar conteÃºdo

#### Diagrama da Estrutura

```
         FileSystemComponent
         (abstract)
                â–²
                â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
        â”‚               â”‚
      File           Folder
     (Leaf)       (Composite)
                      â”‚
                  children[]
                      â”‚
              FileSystemComponent*
```

#### Vantagens do PadrÃ£o

- âœ… **Uniformidade**: Trata arquivos e pastas de forma uniforme atravÃ©s da mesma interface
- âœ… **Hierarquia Recursiva**: Permite estruturas aninhadas de qualquer profundidade
- âœ… **Facilidade de ExtensÃ£o**: Novos tipos de componentes podem ser adicionados facilmente
- âœ… **PrincÃ­pio Aberto/Fechado**: Adiciona novos componentes sem modificar cÃ³digo existente
- âœ… **Simplicidade para o Cliente**: O cliente nÃ£o precisa distinguir entre objetos simples e compostos

## Como Executar

### PrÃ©-requisitos

- Node.js instalado
- TypeScript instalado

### InstalaÃ§Ã£o

```bash
npm install
```

### Executar em Modo de Desenvolvimento

```bash
npm run dev
```

### Executar em Modo de ProduÃ§Ã£o

```bash
npm start
```

## Comandos DisponÃ­veis

| Comando | DescriÃ§Ã£o | Exemplo |
|---------|-----------|---------|
| `criar arquivo <nome>` | Cria um novo arquivo na pasta atual | `criar arquivo documento.txt` |
| `criar pasta <nome>` | Cria uma nova pasta na pasta atual | `criar pasta projetos` |
| `entrar <nome>` | Entra em uma pasta existente | `entrar documentos` |
| `voltar` | Volta para a pasta anterior | `voltar` |
| `listar` | Lista todo o conteÃºdo da pasta atual | `listar` |
| `ajuda` | Mostra a lista de comandos disponÃ­veis | `ajuda` |
| `sair` | Encerra o programa | `sair` |

## Exemplos de CenÃ¡rios

### CenÃ¡rio 1: Estrutura BÃ¡sica de Projeto

```
/root> criar pasta src
/root> criar pasta tests
/root> criar arquivo package.json
/root> entrar src
/root/src> criar arquivo index.ts
/root/src> criar pasta models
/root/src> criar pasta services
/root/src> voltar
/root> listar
```

### CenÃ¡rio 2: OrganizaÃ§Ã£o de Documentos

```
/root> criar pasta 2025
/root> entrar 2025
/root/2025> criar pasta janeiro
/root/2025> criar pasta fevereiro
/root/2025> entrar janeiro
/root/2025/janeiro> criar arquivo relatorio_vendas.pdf
/root/2025/janeiro> criar arquivo notas_fiscais.xlsx
/root/2025/janeiro> listar
```

### CenÃ¡rio 3: Estrutura de Desenvolvimento

```
/root> criar pasta projeto-web
/root> entrar projeto-web
/root/projeto-web> criar pasta frontend
/root/projeto-web> criar pasta backend
/root/projeto-web> criar arquivo README.md
/root/projeto-web> entrar frontend
/root/projeto-web/frontend> criar pasta components
/root/projeto-web/frontend> criar pasta styles
/root/projeto-web/frontend> criar arquivo index.html
```

## ValidaÃ§Ãµes Implementadas

- âœ… NÃ£o permite criar arquivos/pastas com nomes duplicados
- âœ… NÃ£o permite entrar em um arquivo (apenas em pastas)
- âœ… NÃ£o permite voltar alÃ©m da pasta raiz
- âœ… Verifica se a pasta existe antes de entrar
- âœ… Mostra mensagens de erro claras e amigÃ¡veis

## PossÃ­veis ExtensÃµes

O sistema pode ser facilmente estendido com novos recursos:

- **Link SimbÃ³lico**: Novo tipo de componente que aponta para outro componente
- **Arquivo Compactado**: Componente composite especial que contÃ©m arquivos comprimidos
- **PermissÃµes**: Adicionar sistema de permissÃµes de leitura/escrita
- **Busca**: Implementar busca recursiva de arquivos/pastas
- **Tamanho**: Adicionar informaÃ§Ã£o de tamanho para arquivos e cÃ¡lculo recursivo para pastas
- **Data de CriaÃ§Ã£o**: Adicionar timestamps aos componentes
- **Mover/Copiar**: Implementar operaÃ§Ãµes de mover e copiar componentes
- **Deletar**: Adicionar comando para remover arquivos e pastas
- **Renomear**: Adicionar comando para renomear componentes
- **Atalhos**: Implementar atalhos como `cd ..` para voltar ou `ls` para listar

## Conceitos Importantes do Composite

### TransparÃªncia vs SeguranÃ§a

Esta implementaÃ§Ã£o escolhe **seguranÃ§a** sobre transparÃªncia:
- OperaÃ§Ãµes de composiÃ§Ã£o (`add`, `remove`, etc.) lanÃ§am erro quando chamadas em folhas
- Vantagem: Erros sÃ£o detectados em tempo de execuÃ§Ã£o
- Alternativa: Fazer operaÃ§Ãµes de composiÃ§Ã£o retornarem silenciosamente (transparÃªncia)

### RecursÃ£o

O mÃ©todo `display()` demonstra perfeitamente a natureza recursiva do padrÃ£o:
- Em `File`: simplesmente exibe o nome do arquivo
- Em `Folder`: exibe seu nome E chama `display()` em cada filho
- A recursÃ£o continua atÃ© atingir as folhas (arquivos)

## Tecnologias Utilizadas

- TypeScript
- Node.js
- Readline (para interface de console)

## DiferenÃ§a entre Composite e Decorator

Embora ambos os padrÃµes usem composiÃ§Ã£o:

| Aspecto | Composite | Decorator |
|---------|-----------|-----------|
| **PropÃ³sito** | Representar hierarquias parte-todo | Adicionar responsabilidades dinamicamente |
| **Estrutura** | Ãrvore com mÃºltiplos filhos | Cadeia linear de wrappers |
| **RelaÃ§Ã£o** | "Tem muitos" (1:N) | "Envolve um" (1:1) |
| **Uso** | Estruturas hierÃ¡rquicas | Adicionar funcionalidades |

## ConclusÃ£o

Este exercÃ­cio demonstra o poder do padrÃ£o Composite para criar estruturas hierÃ¡rquicas complexas mantendo o cÃ³digo simples e extensÃ­vel. A implementaÃ§Ã£o fornece uma base sÃ³lida que pode ser facilmente expandida com novos tipos de componentes e funcionalidades.
